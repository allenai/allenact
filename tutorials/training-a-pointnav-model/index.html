



<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      <meta http-equiv="x-ua-compatible" content="ie=edge">
      
        <meta name="description" content="A framework for Embodied AI research">
      
      
        <link rel="canonical" href="https://github.com/allenai/allenact/tutorials/training-a-pointnav-model/">
      
      
      
        <meta name="lang:clipboard.copy" content="Copy to clipboard">
      
        <meta name="lang:clipboard.copied" content="Copied to clipboard">
      
        <meta name="lang:search.language" content="en">
      
        <meta name="lang:search.pipeline.stopwords" content="True">
      
        <meta name="lang:search.pipeline.trimmer" content="True">
      
        <meta name="lang:search.result.none" content="No matching documents">
      
        <meta name="lang:search.result.one" content="1 matching document">
      
        <meta name="lang:search.result.other" content="# matching documents">
      
        <meta name="lang:search.tokenizer" content="[\s\-]+">
      
      <link rel="shortcut icon" href="../../img/AllenAct_A.svg">
      <meta name="generator" content="mkdocs-1.0.4, mkdocs-material-4.1.0">
    
    
      
        <title>PointNav in RoboTHOR - AllenAct</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/application.982221ab.css">
      
        <link rel="stylesheet" href="../../assets/stylesheets/application-palette.224b79ff.css">
      
      
        
        
        <meta name="theme-color" content="#2196f3">
      
    
    
      <script src="../../assets/javascripts/modernizr.01ccdecf.js"></script>
    
    
      
        <link href="https://fonts.gstatic.com" rel="preconnect" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700|Roboto+Mono">
        <style>body,input{font-family:"Roboto","Helvetica Neue",Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Roboto Mono","Courier New",Courier,monospace}</style>
      
    
    <link rel="stylesheet" href="../../assets/fonts/material-icons.css">
    
    
    
      
    
    
  </head>
  
    
    
    <body dir="ltr" data-md-color-primary="blue" data-md-color-accent="grey">
  
    <svg class="md-svg">
      <defs>
        
        
          <svg xmlns="http://www.w3.org/2000/svg" width="416" height="448"
    viewBox="0 0 416 448" id="__github">
  <path fill="currentColor" d="M160 304q0 10-3.125 20.5t-10.75 19-18.125
        8.5-18.125-8.5-10.75-19-3.125-20.5 3.125-20.5 10.75-19 18.125-8.5
        18.125 8.5 10.75 19 3.125 20.5zM320 304q0 10-3.125 20.5t-10.75
        19-18.125 8.5-18.125-8.5-10.75-19-3.125-20.5 3.125-20.5 10.75-19
        18.125-8.5 18.125 8.5 10.75 19 3.125 20.5zM360
        304q0-30-17.25-51t-46.75-21q-10.25 0-48.75 5.25-17.75 2.75-39.25
        2.75t-39.25-2.75q-38-5.25-48.75-5.25-29.5 0-46.75 21t-17.25 51q0 22 8
        38.375t20.25 25.75 30.5 15 35 7.375 37.25 1.75h42q20.5 0
        37.25-1.75t35-7.375 30.5-15 20.25-25.75 8-38.375zM416 260q0 51.75-15.25
        82.75-9.5 19.25-26.375 33.25t-35.25 21.5-42.5 11.875-42.875 5.5-41.75
        1.125q-19.5 0-35.5-0.75t-36.875-3.125-38.125-7.5-34.25-12.875-30.25-20.25-21.5-28.75q-15.5-30.75-15.5-82.75
        0-59.25 34-99-6.75-20.5-6.75-42.5 0-29 12.75-54.5 27 0 47.5 9.875t47.25
        30.875q36.75-8.75 77.25-8.75 37 0 70 8 26.25-20.5
        46.75-30.25t47.25-9.75q12.75 25.5 12.75 54.5 0 21.75-6.75 42 34 40 34
        99.5z" />
</svg>
        
      </defs>
    </svg>
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" data-md-component="overlay" for="__drawer"></label>
    
      <a href="#tutorial-pointnav-in-robothor" tabindex="1" class="md-skip">
        Skip to content
      </a>
    
    
      <header class="md-header" data-md-component="header">
  <nav class="md-header-nav md-grid">
    <div class="md-flex">
      <div class="md-flex__cell md-flex__cell--shrink">
        <a href="https://github.com/allenai/allenact" title="AllenAct" class="md-header-nav__button md-logo">
          
            <img src="../../img/AI2_Avatar_White.png" width="24" height="24">
          
        </a>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        <label class="md-icon md-icon--menu md-header-nav__button" for="__drawer"></label>
      </div>
      <div class="md-flex__cell md-flex__cell--stretch">
        <div class="md-flex__ellipsis md-header-nav__title" data-md-component="title">
          
            <span class="md-header-nav__topic">
              AllenAct
            </span>
            <span class="md-header-nav__topic">
              PointNav in RoboTHOR
            </span>
          
        </div>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        
          <label class="md-icon md-icon--search md-header-nav__button" for="__search"></label>
          
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="query" data-md-state="active">
      <label class="md-icon md-search__icon" for="__search"></label>
      <button type="reset" class="md-icon md-search__icon" data-md-component="reset" tabindex="-1">
        &#xE5CD;
      </button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="result">
          <div class="md-search-result__meta">
            Type to start searching
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
        
      </div>
      
        <div class="md-flex__cell md-flex__cell--shrink">
          <div class="md-header-nav__source">
            


  

<a href="https://github.com/allenai/allenact/" title="Go to repository" class="md-source" data-md-source="github">
  
    <div class="md-source__icon">
      <svg viewBox="0 0 24 24" width="24" height="24">
        <use xlink:href="#__github" width="24" height="24"></use>
      </svg>
    </div>
  
  <div class="md-source__repository">
    allenai/allenact
  </div>
</a>
          </div>
        </div>
      
    </div>
  </nav>
</header>
    
    <div class="md-container">
      
        
      
      
      <main class="md-main">
        <div class="md-main__inner md-grid" data-md-component="container">
          
            
              <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    <nav class="md-nav md-nav--primary" data-md-level="0">
  <label class="md-nav__title md-nav__title--site" for="__drawer">
    <a href="https://github.com/allenai/allenact" title="AllenAct" class="md-nav__button md-logo">
      
        <img src="../../img/AI2_Avatar_White.png" width="48" height="48">
      
    </a>
    AllenAct
  </label>
  
    <div class="md-nav__source">
      


  

<a href="https://github.com/allenai/allenact/" title="Go to repository" class="md-source" data-md-source="github">
  
    <div class="md-source__icon">
      <svg viewBox="0 0 24 24" width="24" height="24">
        <use xlink:href="#__github" width="24" height="24"></use>
      </svg>
    </div>
  
  <div class="md-source__repository">
    allenai/allenact
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      


  <li class="md-nav__item">
    <a href="../.." title="Overview" class="md-nav__link">
      Overview
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-2" type="checkbox" id="nav-2">
    
    <label class="md-nav__link" for="nav-2">
      Installation
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-2">
        Installation
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../installation/installation-allenact/" title="Install AllenAct" class="md-nav__link">
      Install AllenAct
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../installation/installation-framework/" title="Install environments" class="md-nav__link">
      Install environments
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../installation/download-datasets/" title="Download datasets" class="md-nav__link">
      Download datasets
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-3" type="checkbox" id="nav-3">
    
    <label class="md-nav__link" for="nav-3">
      Getting started
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-3">
        Getting started
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../getting_started/running-your-first-experiment/" title="Run your first experiment" class="md-nav__link">
      Run your first experiment
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../getting_started/structure/" title="Structure of the codebase" class="md-nav__link">
      Structure of the codebase
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../getting_started/abstractions/" title="Primary abstractions" class="md-nav__link">
      Primary abstractions
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      

  


  <li class="md-nav__item md-nav__item--active md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-4" type="checkbox" id="nav-4" checked>
    
    <label class="md-nav__link" for="nav-4">
      Tutorials
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-4">
        Tutorials
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../" title="AllenAct Tutorials" class="md-nav__link">
      AllenAct Tutorials
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../minigrid-tutorial/" title="Navigation in Minigrid" class="md-nav__link">
      Navigation in Minigrid
    </a>
  </li>

        
          
          
          

  


  <li class="md-nav__item md-nav__item--active">
    
    <input class="md-toggle md-nav__toggle" data-md-toggle="toc" type="checkbox" id="__toc">
    
      
    
    
      <label class="md-nav__link md-nav__link--active" for="__toc">
        PointNav in RoboTHOR
      </label>
    
    <a href="./" title="PointNav in RoboTHOR" class="md-nav__link md-nav__link--active">
      PointNav in RoboTHOR
    </a>
    
      
<nav class="md-nav md-nav--secondary">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">Table of contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#introduction" title="Introduction" class="md-nav__link">
    Introduction
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#pointnav" title="Pointnav" class="md-nav__link">
    Pointnav
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#what-is-an-environment-anyways" title="What is an environment anyways?" class="md-nav__link">
    What is an environment anyways?
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#learning-algorithm" title="Learning algorithm" class="md-nav__link">
    Learning algorithm
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#environemnt-setup" title="Environemnt Setup" class="md-nav__link">
    Environemnt Setup
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#dataset-setup" title="Dataset Setup" class="md-nav__link">
    Dataset Setup
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#config-file-setup" title="Config File Setup" class="md-nav__link">
    Config File Setup
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#training-model-on-debug-dataset" title="Training Model On Debug Dataset" class="md-nav__link">
    Training Model On Debug Dataset
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#training-model-on-full-dataset" title="Training Model On Full Dataset" class="md-nav__link">
    Training Model On Full Dataset
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#conclusion" title="Conclusion" class="md-nav__link">
    Conclusion
  </a>
  
</li>
      
      
      
      
      
    </ul>
  
</nav>
    
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../transfering-to-a-different-environment-framework/" title="Swapping environments" class="md-nav__link">
      Swapping environments
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../running_inference_on_a_pretrained_model/" title="Using a pre-trained model" class="md-nav__link">
      Using a pre-trained model
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-5" type="checkbox" id="nav-5">
    
    <label class="md-nav__link" for="nav-5">
      HowTos
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-5">
        HowTos
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../howtos/defining-an-experiment/" title="Define an experiment" class="md-nav__link">
      Define an experiment
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../howtos/changing-rewards-and-losses/" title="Change rewards and losses" class="md-nav__link">
      Change rewards and losses
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../howtos/defining-a-new-model/" title="Define a new model" class="md-nav__link">
      Define a new model
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../howtos/defining-a-new-task/" title="Define a new task" class="md-nav__link">
      Define a new task
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../howtos/defining-a-new-training-pipeline/" title="Define a new training pipeline" class="md-nav__link">
      Define a new training pipeline
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-6" type="checkbox" id="nav-6">
    
    <label class="md-nav__link" for="nav-6">
      Projects
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-6">
        Projects
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../projects/babyai_baselines/" title="BabyAI baselines" class="md-nav__link">
      BabyAI baselines
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../projects/pointnav_baselines/" title="PointNav baselines" class="md-nav__link">
      PointNav baselines
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../projects/objectnav_baselines/" title="ObjectNav baselines" class="md-nav__link">
      ObjectNav baselines
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../../FAQ/" title="FAQ" class="md-nav__link">
      FAQ
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../../CONTRIBUTING/" title="Contributing" class="md-nav__link">
      Contributing
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../../LICENSE/" title="Licence" class="md-nav__link">
      Licence
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-10" type="checkbox" id="nav-10">
    
    <label class="md-nav__link" for="nav-10">
      API
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-10">
        API
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../api/constants.md" title="constants" class="md-nav__link">
      constants
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-10-2" type="checkbox" id="nav-10-2">
    
    <label class="md-nav__link" for="nav-10-2">
      core
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-10-2">
        core
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-10-2-1" type="checkbox" id="nav-10-2-1">
    
    <label class="md-nav__link" for="nav-10-2-1">
      base_abstractions
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="3">
      <label class="md-nav__title" for="nav-10-2-1">
        base_abstractions
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../api/core/base_abstractions/experiment_config.md" title="experiment_config" class="md-nav__link">
      experiment_config
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../api/core/base_abstractions/misc.md" title="misc" class="md-nav__link">
      misc
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../api/core/base_abstractions/task.md" title="task" class="md-nav__link">
      task
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../api/core/base_abstractions/sensor.md" title="sensor" class="md-nav__link">
      sensor
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../api/core/base_abstractions/preprocessor.md" title="preprocessor" class="md-nav__link">
      preprocessor
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../api/core/base_abstractions/distributions.md" title="distributions" class="md-nav__link">
      distributions
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-10-2-2" type="checkbox" id="nav-10-2-2">
    
    <label class="md-nav__link" for="nav-10-2-2">
      algorithms
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="3">
      <label class="md-nav__title" for="nav-10-2-2">
        algorithms
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-10-2-2-1" type="checkbox" id="nav-10-2-2-1">
    
    <label class="md-nav__link" for="nav-10-2-2-1">
      onpolicy_sync
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="4">
      <label class="md-nav__title" for="nav-10-2-2-1">
        onpolicy_sync
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-10-2-2-1-1" type="checkbox" id="nav-10-2-2-1-1">
    
    <label class="md-nav__link" for="nav-10-2-2-1-1">
      losses
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="5">
      <label class="md-nav__title" for="nav-10-2-2-1-1">
        losses
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../api/core/algorithms/onpolicy_sync/losses/imitation.md" title="imitation" class="md-nav__link">
      imitation
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../api/core/algorithms/onpolicy_sync/losses/abstract_loss.md" title="abstract_loss" class="md-nav__link">
      abstract_loss
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../api/core/algorithms/onpolicy_sync/losses/ppo.md" title="ppo" class="md-nav__link">
      ppo
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../api/core/algorithms/onpolicy_sync/losses/kfac.md" title="kfac" class="md-nav__link">
      kfac
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../api/core/algorithms/onpolicy_sync/losses/a2cacktr.md" title="a2cacktr" class="md-nav__link">
      a2cacktr
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../api/core/algorithms/onpolicy_sync/runner.md" title="runner" class="md-nav__link">
      runner
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../api/core/algorithms/onpolicy_sync/policy.md" title="policy" class="md-nav__link">
      policy
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../api/core/algorithms/onpolicy_sync/engine.md" title="engine" class="md-nav__link">
      engine
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../api/core/algorithms/onpolicy_sync/vector_sampled_tasks.md" title="vector_sampled_tasks" class="md-nav__link">
      vector_sampled_tasks
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../api/core/algorithms/onpolicy_sync/storage.md" title="storage" class="md-nav__link">
      storage
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-10-2-2-2" type="checkbox" id="nav-10-2-2-2">
    
    <label class="md-nav__link" for="nav-10-2-2-2">
      offpolicy_sync
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="4">
      <label class="md-nav__title" for="nav-10-2-2-2">
        offpolicy_sync
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-10-2-2-2-1" type="checkbox" id="nav-10-2-2-2-1">
    
    <label class="md-nav__link" for="nav-10-2-2-2-1">
      losses
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="5">
      <label class="md-nav__title" for="nav-10-2-2-2-1">
        losses
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../api/core/algorithms/offpolicy_sync/losses/abstract_offpolicy_loss.md" title="abstract_offpolicy_loss" class="md-nav__link">
      abstract_offpolicy_loss
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
      </ul>
    </nav>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-10-2-3" type="checkbox" id="nav-10-2-3">
    
    <label class="md-nav__link" for="nav-10-2-3">
      models
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="3">
      <label class="md-nav__title" for="nav-10-2-3">
        models
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../api/core/models/basic_models.md" title="basic_models" class="md-nav__link">
      basic_models
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-10-3" type="checkbox" id="nav-10-3">
    
    <label class="md-nav__link" for="nav-10-3">
      plugins
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-10-3">
        plugins
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-10-3-1" type="checkbox" id="nav-10-3-1">
    
    <label class="md-nav__link" for="nav-10-3-1">
      habitat_plugin
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="3">
      <label class="md-nav__title" for="nav-10-3-1">
        habitat_plugin
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../api/plugins/habitat_plugin/habitat_constants.md" title="habitat_constants" class="md-nav__link">
      habitat_constants
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../api/plugins/habitat_plugin/habitat_preprocessors.md" title="habitat_preprocessors" class="md-nav__link">
      habitat_preprocessors
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-10-3-2" type="checkbox" id="nav-10-3-2">
    
    <label class="md-nav__link" for="nav-10-3-2">
      lighthouse_plugin
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="3">
      <label class="md-nav__title" for="nav-10-3-2">
        lighthouse_plugin
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../api/plugins/lighthouse_plugin/lighthouse_models.md" title="lighthouse_models" class="md-nav__link">
      lighthouse_models
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../api/plugins/lighthouse_plugin/lighthouse_environment.md" title="lighthouse_environment" class="md-nav__link">
      lighthouse_environment
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../api/plugins/lighthouse_plugin/lighthouse_tasks.md" title="lighthouse_tasks" class="md-nav__link">
      lighthouse_tasks
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../api/plugins/lighthouse_plugin/lighthouse_sensors.md" title="lighthouse_sensors" class="md-nav__link">
      lighthouse_sensors
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../api/plugins/lighthouse_plugin/lighthouse_util.md" title="lighthouse_util" class="md-nav__link">
      lighthouse_util
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-10-3-3" type="checkbox" id="nav-10-3-3">
    
    <label class="md-nav__link" for="nav-10-3-3">
      babyai_plugin
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="3">
      <label class="md-nav__title" for="nav-10-3-3">
        babyai_plugin
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../api/plugins/babyai_plugin/babyai_constants.md" title="babyai_constants" class="md-nav__link">
      babyai_constants
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../api/plugins/babyai_plugin/babyai_models.md" title="babyai_models" class="md-nav__link">
      babyai_models
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-10-3-3-3" type="checkbox" id="nav-10-3-3-3">
    
    <label class="md-nav__link" for="nav-10-3-3-3">
      scripts
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="4">
      <label class="md-nav__title" for="nav-10-3-3-3">
        scripts
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../api/plugins/babyai_plugin/scripts/truncate_expert_demos.md" title="truncate_expert_demos" class="md-nav__link">
      truncate_expert_demos
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../api/plugins/babyai_plugin/scripts/get_instr_length_percentiles.md" title="get_instr_length_percentiles" class="md-nav__link">
      get_instr_length_percentiles
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../api/plugins/babyai_plugin/scripts/download_babyai_expert_demos.md" title="download_babyai_expert_demos" class="md-nav__link">
      download_babyai_expert_demos
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../api/plugins/babyai_plugin/babyai_tasks.md" title="babyai_tasks" class="md-nav__link">
      babyai_tasks
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-10-3-4" type="checkbox" id="nav-10-3-4">
    
    <label class="md-nav__link" for="nav-10-3-4">
      ithor_plugin
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="3">
      <label class="md-nav__title" for="nav-10-3-4">
        ithor_plugin
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../api/plugins/ithor_plugin/ithor_tasks.md" title="ithor_tasks" class="md-nav__link">
      ithor_tasks
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../api/plugins/ithor_plugin/ithor_environment.md" title="ithor_environment" class="md-nav__link">
      ithor_environment
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../api/plugins/ithor_plugin/ithor_constants.md" title="ithor_constants" class="md-nav__link">
      ithor_constants
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../api/plugins/ithor_plugin/ithor_util.md" title="ithor_util" class="md-nav__link">
      ithor_util
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../api/plugins/ithor_plugin/ithor_sensors.md" title="ithor_sensors" class="md-nav__link">
      ithor_sensors
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../api/plugins/ithor_plugin/ithor_task_samplers.md" title="ithor_task_samplers" class="md-nav__link">
      ithor_task_samplers
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-10-3-5" type="checkbox" id="nav-10-3-5">
    
    <label class="md-nav__link" for="nav-10-3-5">
      robothor_plugin
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="3">
      <label class="md-nav__title" for="nav-10-3-5">
        robothor_plugin
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../api/plugins/robothor_plugin/robothor_preprocessors.md" title="robothor_preprocessors" class="md-nav__link">
      robothor_preprocessors
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../api/plugins/robothor_plugin/robothor_task_samplers.md" title="robothor_task_samplers" class="md-nav__link">
      robothor_task_samplers
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../api/plugins/robothor_plugin/robothor_environment.md" title="robothor_environment" class="md-nav__link">
      robothor_environment
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../api/plugins/robothor_plugin/robothor_constants.md" title="robothor_constants" class="md-nav__link">
      robothor_constants
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../api/plugins/robothor_plugin/robothor_models.md" title="robothor_models" class="md-nav__link">
      robothor_models
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../api/plugins/robothor_plugin/robothor_tasks.md" title="robothor_tasks" class="md-nav__link">
      robothor_tasks
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-10-3-5-7" type="checkbox" id="nav-10-3-5-7">
    
    <label class="md-nav__link" for="nav-10-3-5-7">
      configs
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="4">
      <label class="md-nav__title" for="nav-10-3-5-7">
        configs
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../api/plugins/robothor_plugin/configs/resnet18_objectnav.md" title="resnet18_objectnav" class="md-nav__link">
      resnet18_objectnav
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../api/plugins/robothor_plugin/configs/simple_pointnav.md" title="simple_pointnav" class="md-nav__link">
      simple_pointnav
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../api/plugins/robothor_plugin/configs/resnet18_pointnav.md" title="resnet18_pointnav" class="md-nav__link">
      resnet18_pointnav
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../api/plugins/robothor_plugin/configs/pointnav_base.md" title="pointnav_base" class="md-nav__link">
      pointnav_base
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../api/plugins/robothor_plugin/configs/resnet18_nav_base.md" title="resnet18_nav_base" class="md-nav__link">
      resnet18_nav_base
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../api/plugins/robothor_plugin/configs/nav_base.md" title="nav_base" class="md-nav__link">
      nav_base
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../api/plugins/robothor_plugin/configs/simple_objectnav.md" title="simple_objectnav" class="md-nav__link">
      simple_objectnav
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../api/plugins/robothor_plugin/configs/objectnav_base.md" title="objectnav_base" class="md-nav__link">
      objectnav_base
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../api/plugins/robothor_plugin/robothor_sensors.md" title="robothor_sensors" class="md-nav__link">
      robothor_sensors
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../api/plugins/robothor_plugin/robothor_viz.md" title="robothor_viz" class="md-nav__link">
      robothor_viz
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-10-3-6" type="checkbox" id="nav-10-3-6">
    
    <label class="md-nav__link" for="nav-10-3-6">
      minigrid_plugin
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="3">
      <label class="md-nav__title" for="nav-10-3-6">
        minigrid_plugin
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../api/plugins/minigrid_plugin/minigrid_tasks.md" title="minigrid_tasks" class="md-nav__link">
      minigrid_tasks
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../api/plugins/minigrid_plugin/minigrid_environments.md" title="minigrid_environments" class="md-nav__link">
      minigrid_environments
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../api/plugins/minigrid_plugin/minigrid_offpolicy.md" title="minigrid_offpolicy" class="md-nav__link">
      minigrid_offpolicy
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../api/plugins/minigrid_plugin/minigrid_sensors.md" title="minigrid_sensors" class="md-nav__link">
      minigrid_sensors
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-10-3-6-5" type="checkbox" id="nav-10-3-6-5">
    
    <label class="md-nav__link" for="nav-10-3-6-5">
      configs
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="4">
      <label class="md-nav__title" for="nav-10-3-6-5">
        configs
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../api/plugins/minigrid_plugin/configs/minigrid_nomemory.md" title="minigrid_nomemory" class="md-nav__link">
      minigrid_nomemory
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../api/plugins/minigrid_plugin/minigrid_models.md" title="minigrid_models" class="md-nav__link">
      minigrid_models
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-10-4" type="checkbox" id="nav-10-4">
    
    <label class="md-nav__link" for="nav-10-4">
      projects
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-10-4">
        projects
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-10-4-1" type="checkbox" id="nav-10-4-1">
    
    <label class="md-nav__link" for="nav-10-4-1">
      objectnav_baselines
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="3">
      <label class="md-nav__title" for="nav-10-4-1">
        objectnav_baselines
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-10-4-1-1" type="checkbox" id="nav-10-4-1-1">
    
    <label class="md-nav__link" for="nav-10-4-1-1">
      experiments
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="4">
      <label class="md-nav__title" for="nav-10-4-1-1">
        experiments
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-10-4-1-1-1" type="checkbox" id="nav-10-4-1-1-1">
    
    <label class="md-nav__link" for="nav-10-4-1-1-1">
      robothor
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="5">
      <label class="md-nav__title" for="nav-10-4-1-1-1">
        robothor
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../api/projects/objectnav_baselines/experiments/robothor/objectnav_robothor_base.md" title="objectnav_robothor_base" class="md-nav__link">
      objectnav_robothor_base
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../api/projects/objectnav_baselines/experiments/robothor/objectnav_robothor_rgb_resnetgru_ddppo.md" title="objectnav_robothor_rgb_resnetgru_ddppo" class="md-nav__link">
      objectnav_robothor_rgb_resnetgru_ddppo
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../api/projects/objectnav_baselines/experiments/robothor/objectnav_robothor_rgbd_resnetgru_ddppo.md" title="objectnav_robothor_rgbd_resnetgru_ddppo" class="md-nav__link">
      objectnav_robothor_rgbd_resnetgru_ddppo
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../api/projects/objectnav_baselines/experiments/robothor/objectnav_robothor_depth_resnetgru_ddppo.md" title="objectnav_robothor_depth_resnetgru_ddppo" class="md-nav__link">
      objectnav_robothor_depth_resnetgru_ddppo
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-10-4-1-1-2" type="checkbox" id="nav-10-4-1-1-2">
    
    <label class="md-nav__link" for="nav-10-4-1-1-2">
      ithor
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="5">
      <label class="md-nav__title" for="nav-10-4-1-1-2">
        ithor
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../api/projects/objectnav_baselines/experiments/ithor/objectnav_ithor_rgbd_resnetgru_ddppo.md" title="objectnav_ithor_rgbd_resnetgru_ddppo" class="md-nav__link">
      objectnav_ithor_rgbd_resnetgru_ddppo
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../api/projects/objectnav_baselines/experiments/ithor/objectnav_ithor_depth_resnetgru_ddppo.md" title="objectnav_ithor_depth_resnetgru_ddppo" class="md-nav__link">
      objectnav_ithor_depth_resnetgru_ddppo
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../api/projects/objectnav_baselines/experiments/ithor/objectnav_ithor_rgb_resnetgru_ddppo.md" title="objectnav_ithor_rgb_resnetgru_ddppo" class="md-nav__link">
      objectnav_ithor_rgb_resnetgru_ddppo
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../api/projects/objectnav_baselines/experiments/ithor/objectnav_ithor_base.md" title="objectnav_ithor_base" class="md-nav__link">
      objectnav_ithor_base
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../api/projects/objectnav_baselines/experiments/objectnav_base.md" title="objectnav_base" class="md-nav__link">
      objectnav_base
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-10-4-1-2" type="checkbox" id="nav-10-4-1-2">
    
    <label class="md-nav__link" for="nav-10-4-1-2">
      models
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="4">
      <label class="md-nav__title" for="nav-10-4-1-2">
        models
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../api/projects/objectnav_baselines/models/object_nav_models.md" title="object_nav_models" class="md-nav__link">
      object_nav_models
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-10-4-2" type="checkbox" id="nav-10-4-2">
    
    <label class="md-nav__link" for="nav-10-4-2">
      babyai_baselines
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="3">
      <label class="md-nav__title" for="nav-10-4-2">
        babyai_baselines
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-10-4-2-1" type="checkbox" id="nav-10-4-2-1">
    
    <label class="md-nav__link" for="nav-10-4-2-1">
      experiments
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="4">
      <label class="md-nav__title" for="nav-10-4-2-1">
        experiments
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-10-4-2-1-1" type="checkbox" id="nav-10-4-2-1-1">
    
    <label class="md-nav__link" for="nav-10-4-2-1-1">
      go_to_local
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="5">
      <label class="md-nav__title" for="nav-10-4-2-1-1">
        go_to_local
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../api/projects/babyai_baselines/experiments/go_to_local/bc.md" title="bc" class="md-nav__link">
      bc
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../api/projects/babyai_baselines/experiments/go_to_local/distributed_bc_offpolicy.md" title="distributed_bc_offpolicy" class="md-nav__link">
      distributed_bc_offpolicy
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../api/projects/babyai_baselines/experiments/go_to_local/dagger.md" title="dagger" class="md-nav__link">
      dagger
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../api/projects/babyai_baselines/experiments/go_to_local/bc_offpolicy.md" title="bc_offpolicy" class="md-nav__link">
      bc_offpolicy
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../api/projects/babyai_baselines/experiments/go_to_local/bc_teacher_forcing.md" title="bc_teacher_forcing" class="md-nav__link">
      bc_teacher_forcing
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../api/projects/babyai_baselines/experiments/go_to_local/distributed_bc_teacher_forcing.md" title="distributed_bc_teacher_forcing" class="md-nav__link">
      distributed_bc_teacher_forcing
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../api/projects/babyai_baselines/experiments/go_to_local/ppo.md" title="ppo" class="md-nav__link">
      ppo
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../api/projects/babyai_baselines/experiments/go_to_local/a2c.md" title="a2c" class="md-nav__link">
      a2c
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../api/projects/babyai_baselines/experiments/go_to_local/base.md" title="base" class="md-nav__link">
      base
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-10-4-2-1-2" type="checkbox" id="nav-10-4-2-1-2">
    
    <label class="md-nav__link" for="nav-10-4-2-1-2">
      go_to_obj
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="5">
      <label class="md-nav__title" for="nav-10-4-2-1-2">
        go_to_obj
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../api/projects/babyai_baselines/experiments/go_to_obj/bc.md" title="bc" class="md-nav__link">
      bc
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../api/projects/babyai_baselines/experiments/go_to_obj/dagger.md" title="dagger" class="md-nav__link">
      dagger
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../api/projects/babyai_baselines/experiments/go_to_obj/bc_teacher_forcing.md" title="bc_teacher_forcing" class="md-nav__link">
      bc_teacher_forcing
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../api/projects/babyai_baselines/experiments/go_to_obj/ppo.md" title="ppo" class="md-nav__link">
      ppo
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../api/projects/babyai_baselines/experiments/go_to_obj/a2c.md" title="a2c" class="md-nav__link">
      a2c
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../api/projects/babyai_baselines/experiments/go_to_obj/base.md" title="base" class="md-nav__link">
      base
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../api/projects/babyai_baselines/experiments/base.md" title="base" class="md-nav__link">
      base
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-10-4-3" type="checkbox" id="nav-10-4-3">
    
    <label class="md-nav__link" for="nav-10-4-3">
      pointnav_baselines
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="3">
      <label class="md-nav__title" for="nav-10-4-3">
        pointnav_baselines
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-10-4-3-1" type="checkbox" id="nav-10-4-3-1">
    
    <label class="md-nav__link" for="nav-10-4-3-1">
      experiments
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="4">
      <label class="md-nav__title" for="nav-10-4-3-1">
        experiments
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-10-4-3-1-1" type="checkbox" id="nav-10-4-3-1-1">
    
    <label class="md-nav__link" for="nav-10-4-3-1-1">
      robothor
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="5">
      <label class="md-nav__title" for="nav-10-4-3-1-1">
        robothor
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../api/projects/pointnav_baselines/experiments/robothor/pointnav_robothor_rgbd_simpleconvgru_ddppo.md" title="pointnav_robothor_rgbd_simpleconvgru_ddppo" class="md-nav__link">
      pointnav_robothor_rgbd_simpleconvgru_ddppo
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../api/projects/pointnav_baselines/experiments/robothor/pointnav_robothor_depth_simpleconvgru_ddppo.md" title="pointnav_robothor_depth_simpleconvgru_ddppo" class="md-nav__link">
      pointnav_robothor_depth_simpleconvgru_ddppo
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../api/projects/pointnav_baselines/experiments/robothor/pointnav_robothor_rgb_simpleconvgru_ddppo.md" title="pointnav_robothor_rgb_simpleconvgru_ddppo" class="md-nav__link">
      pointnav_robothor_rgb_simpleconvgru_ddppo
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../api/projects/pointnav_baselines/experiments/robothor/pointnav_robothor_base.md" title="pointnav_robothor_base" class="md-nav__link">
      pointnav_robothor_base
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../api/projects/pointnav_baselines/experiments/pointnav_base.md" title="pointnav_base" class="md-nav__link">
      pointnav_base
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-10-4-3-1-3" type="checkbox" id="nav-10-4-3-1-3">
    
    <label class="md-nav__link" for="nav-10-4-3-1-3">
      ithor
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="5">
      <label class="md-nav__title" for="nav-10-4-3-1-3">
        ithor
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../api/projects/pointnav_baselines/experiments/ithor/pointnav_ithor_rgbd_simpleconvgru_ddppo.md" title="pointnav_ithor_rgbd_simpleconvgru_ddppo" class="md-nav__link">
      pointnav_ithor_rgbd_simpleconvgru_ddppo
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../api/projects/pointnav_baselines/experiments/ithor/pointnav_ithor_rgb_simpleconvgru_ddppo.md" title="pointnav_ithor_rgb_simpleconvgru_ddppo" class="md-nav__link">
      pointnav_ithor_rgb_simpleconvgru_ddppo
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../api/projects/pointnav_baselines/experiments/ithor/pointnav_ithor_base.md" title="pointnav_ithor_base" class="md-nav__link">
      pointnav_ithor_base
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../api/projects/pointnav_baselines/experiments/ithor/pointnav_ithor_depth_simpleconvgru_ddppo.md" title="pointnav_ithor_depth_simpleconvgru_ddppo" class="md-nav__link">
      pointnav_ithor_depth_simpleconvgru_ddppo
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-10-4-3-2" type="checkbox" id="nav-10-4-3-2">
    
    <label class="md-nav__link" for="nav-10-4-3-2">
      models
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="4">
      <label class="md-nav__title" for="nav-10-4-3-2">
        models
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../api/projects/pointnav_baselines/models/point_nav_models.md" title="point_nav_models" class="md-nav__link">
      point_nav_models
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-10-4-4" type="checkbox" id="nav-10-4-4">
    
    <label class="md-nav__link" for="nav-10-4-4">
      tutorials
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="3">
      <label class="md-nav__title" for="nav-10-4-4">
        tutorials
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../api/projects/tutorials/pointnav_robothor_rgb_ddppo.md" title="pointnav_robothor_rgb_ddppo" class="md-nav__link">
      pointnav_robothor_rgb_ddppo
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../api/projects/tutorials/pointnav_ithor_rgb_ddppo.md" title="pointnav_ithor_rgb_ddppo" class="md-nav__link">
      pointnav_ithor_rgb_ddppo
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../api/projects/tutorials/minigrid_tutorial.md" title="minigrid_tutorial" class="md-nav__link">
      minigrid_tutorial
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-10-5" type="checkbox" id="nav-10-5">
    
    <label class="md-nav__link" for="nav-10-5">
      tests
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-10-5">
        tests
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-10-5-1" type="checkbox" id="nav-10-5-1">
    
    <label class="md-nav__link" for="nav-10-5-1">
      multiprocessing
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="3">
      <label class="md-nav__title" for="nav-10-5-1">
        multiprocessing
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../api/tests/multiprocessing/test_frozen_attribs.md" title="test_frozen_attribs" class="md-nav__link">
      test_frozen_attribs
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-10-5-2" type="checkbox" id="nav-10-5-2">
    
    <label class="md-nav__link" for="nav-10-5-2">
      sync_algs_cpu
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="3">
      <label class="md-nav__title" for="nav-10-5-2">
        sync_algs_cpu
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../api/tests/sync_algs_cpu/test_to_to_obj_trains.md" title="test_to_to_obj_trains" class="md-nav__link">
      test_to_to_obj_trains
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-10-6" type="checkbox" id="nav-10-6">
    
    <label class="md-nav__link" for="nav-10-6">
      utils
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-10-6">
        utils
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../api/utils/model_utils.md" title="model_utils" class="md-nav__link">
      model_utils
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../api/utils/experiment_utils.md" title="experiment_utils" class="md-nav__link">
      experiment_utils
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../api/utils/system.md" title="system" class="md-nav__link">
      system
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../api/utils/cacheless_frcnn.md" title="cacheless_frcnn" class="md-nav__link">
      cacheless_frcnn
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../api/utils/misc_utils.md" title="misc_utils" class="md-nav__link">
      misc_utils
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../api/utils/viz_utils.md" title="viz_utils" class="md-nav__link">
      viz_utils
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../api/utils/tensor_utils.md" title="tensor_utils" class="md-nav__link">
      tensor_utils
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../api/utils/cache_utils.md" title="cache_utils" class="md-nav__link">
      cache_utils
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
      </ul>
    </nav>
  </li>

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">Table of contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#introduction" title="Introduction" class="md-nav__link">
    Introduction
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#pointnav" title="Pointnav" class="md-nav__link">
    Pointnav
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#what-is-an-environment-anyways" title="What is an environment anyways?" class="md-nav__link">
    What is an environment anyways?
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#learning-algorithm" title="Learning algorithm" class="md-nav__link">
    Learning algorithm
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#environemnt-setup" title="Environemnt Setup" class="md-nav__link">
    Environemnt Setup
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#dataset-setup" title="Dataset Setup" class="md-nav__link">
    Dataset Setup
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#config-file-setup" title="Config File Setup" class="md-nav__link">
    Config File Setup
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#training-model-on-debug-dataset" title="Training Model On Debug Dataset" class="md-nav__link">
    Training Model On Debug Dataset
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#training-model-on-full-dataset" title="Training Model On Full Dataset" class="md-nav__link">
    Training Model On Full Dataset
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#conclusion" title="Conclusion" class="md-nav__link">
    Conclusion
  </a>
  
</li>
      
      
      
      
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content">
            <article class="md-content__inner md-typeset">
              
                
                  <a href="https://github.com/allenai/allenact/edit/master/docs/tutorials/training-a-pointnav-model.md" title="Edit this page" class="md-icon md-content__icon">&#xE3C9;</a>
                
                
                <h1 id="tutorial-pointnav-in-robothor">Tutorial: PointNav in RoboTHOR<a class="headerlink" href="#tutorial-pointnav-in-robothor" title="Permanent link">#</a></h1>
<p><img alt="RoboTHOR Robot" src="../../img/RoboTHOR_robot.jpg" /></p>
<h2 id="introduction">Introduction<a class="headerlink" href="#introduction" title="Permanent link">#</a></h2>
<p>One of the most obvious tasks that an embodied agent should master is navigating the world it inhabits.
Before we can teach a robot to cook or clean it first needs to be able to move around. The simplest
way to formulate "moving around" into a task is by making your agent find a beacon somewhere in the environment.
This beacon transmits its location, such that at any time, the agent can get the direction and euclidian distance
to the beacon. This particular task is often called Point Navigation, or <strong>PointNav</strong> for short.</p>
<h4 id="pointnav">Pointnav<a class="headerlink" href="#pointnav" title="Permanent link">#</a></h4>
<p>At first glance, this task seems trivial. If the agent is given the direction and distance of the target at
all times, can it not simply follow this signal directly? The answer is no, because agents are often trained
on this task in environments that emulate real-world buildings which are not wide-open spaces, but rather
contain many smaller rooms. Because of this, the agent has to learn to navigate human spaces and use doors
and hallways to efficiently navigate from one side of the house to the other. This task becomes particularly
difficult when the agent is tested in an environment that it is not trained in. If the agent does not know
how the floor plan of an environment looks, it has to learn to predict the design of man-made structures,
to efficiently navigate across them, much like how people instinctively know how to move around a building
they have never seen before based on their experience navigating similar buildings.</p>
<h4 id="what-is-an-environment-anyways">What is an environment anyways?<a class="headerlink" href="#what-is-an-environment-anyways" title="Permanent link">#</a></h4>
<p>Environments are worlds in which embodied agents exist. If our embodied agent is simply a neural network that is being trained in a simulator, then that simulator is its environment. Similarly, if our agent is a
physical robot then its environment is the real world. The agent interacts with the environment by taking one
of several available actions (such as "move forward", or "turn left"). After each action, the environment
produces a new frame that the agent can analyze to determine its next step. For many tasks, including PointNav
the agent also has a special "stop" action which indicates that the agent thinks it has reached the target.
After this action is called the agent will be reset to a new location, regardless if it reached the
target. The hope is that after enough training the agent will learn to correctly assess that it has successfully
navigated to the target.</p>
<p><img alt="RoboTHOR Sim vs. Real" src="../../img/RoboTHOR_sim_real.jpg" /></p>
<p>There are many simulators designed for the training
of embodied agents. In this tutorial, we will be using a simulator called <a href="https://ai2thor.allenai.org/robothor/">RoboTHOR</a>, 
which is designed specifically to train models that can easily be transferred to a real robot, by providing a
photo-realistic virtual environment and a real-world replica of the environment that researchers can have access to. 
RoboTHOR contains 60 different virtual scenes with different floor plans and furniture and 15 validation scenes.</p>
<p>It is also important to mention that <strong>AllenAct</strong>
has a class abstraction called Environment. This is not the actual simulator game engine or robotics controller,
but rather a shallow wrapper that provides a uniform interface to the actual environment.</p>
<h4 id="learning-algorithm">Learning algorithm<a class="headerlink" href="#learning-algorithm" title="Permanent link">#</a></h4>
<p>Finally, let us briefly touch on the algorithm that we will use to train our embodied agent to navigate. While
<em>allenact</em> offers us great flexibility to train models using complex pipelines, we will be using a simple
pure reinforcement learning approach for this tutorial. More specifically, we will be using DD-PPO,
a decentralized and distributed variant of the ubiquitous PPO algorithm. For those unfamiliar with Reinforcement
Learning we highly recommend <a href="http://karpathy.github.io/2016/05/31/rl/">this tutorial</a> by Andrej Karpathy, and <a href="http://www.incompleteideas.net/book/the-book-2nd.html">this
book</a> by Sutton and Barto. Essentially what we are doing
is letting our agent explore the environment on its own, rewarding it for taking actions that bring it closer
to its goal and penalizing it for actions that take it away from its goal. We then optimize the agent's model
to maximize this reward.</p>
<h2 id="environemnt-setup">Environemnt Setup<a class="headerlink" href="#environemnt-setup" title="Permanent link">#</a></h2>
<p>To setup the RoboTHOR environment please consult the <a href="../../installation/installation-framework/">installation guide</a>.</p>
<h2 id="dataset-setup">Dataset Setup<a class="headerlink" href="#dataset-setup" title="Permanent link">#</a></h2>
<p>To train the model on the PointNav task, we need to download the dataset and precomputed cache of distances to the target. The dataset contains a list of episodes with thousands of randomly generated starting positions and target locations for each of the scenes. The precomputed cache of distances is a large dictionary containing
the shortest path from each point in a scene, to every other point in that scene. This is used to reward the agent
for moving closer to the target in terms of geodesic distance - the actual path distance (as opposed to a 
straight line distance).</p>
<p>We can download and extract the data by navigating to the <code>pointnav_baselines</code> project and running the 
following script:</p>
<div class="codehilite"><pre><span></span><span class="nb">cd</span> projects/pointnav_baselines/dataset
sh download_pointnav_dataset.sh robothor
</pre></div>


<h2 id="config-file-setup">Config File Setup<a class="headerlink" href="#config-file-setup" title="Permanent link">#</a></h2>
<p>Now comes the most important part of the tutorial, we are going to write an experiment config file.</p>
<p>Unlike a library that can be imported into python, <strong>AllenAct</strong> is structured as a framework with a runner script called <code>main.py</code> which will run the experiment specified in a config file. This design forces us to keep meticulous records of exactly which settings were used to produce a particular result,
which can be very useful given how expensive RL models are to train.</p>
<p>We will start by creating a new directory inside the <code>projects</code> directory. We can name this whatever we want but for now, we will go with <code>robothor_pointnav_tutuorial</code>. Then we can create a directory called 
 <code>experiments</code> inside the new directory we just created. This hierarchy is not necessary but it helps keep
our experiments neatly organized. Now we create a file called <code>pointnav_robothor_rgb_ddppo</code> inside the
<code>experiments</code> folder (again the name of this file is arbitrary).</p>
<p>We start off by importing everything we will need:</p>
<div class="codehilite"><pre><span></span><span class="kn">import</span> <span class="nn">glob</span>
<span class="kn">from</span> <span class="nn">math</span> <span class="kn">import</span> <span class="n">ceil</span>
<span class="kn">from</span> <span class="nn">typing</span> <span class="kn">import</span> <span class="n">Dict</span><span class="p">,</span> <span class="n">Any</span><span class="p">,</span> <span class="n">List</span><span class="p">,</span> <span class="n">Optional</span>

<span class="kn">import</span> <span class="nn">gym</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="kn">as</span> <span class="nn">np</span>
<span class="kn">import</span> <span class="nn">torch</span>
<span class="kn">import</span> <span class="nn">torch.nn</span> <span class="kn">as</span> <span class="nn">nn</span>
<span class="kn">import</span> <span class="nn">torch.optim</span> <span class="kn">as</span> <span class="nn">optim</span>
<span class="kn">from</span> <span class="nn">torch.optim.lr_scheduler</span> <span class="kn">import</span> <span class="n">LambdaLR</span>
<span class="kn">from</span> <span class="nn">torchvision</span> <span class="kn">import</span> <span class="n">models</span>

<span class="kn">from</span> <span class="nn">core.algorithms.onpolicy_sync.losses</span> <span class="kn">import</span> <span class="n">PPO</span>
<span class="kn">from</span> <span class="nn">core.algorithms.onpolicy_sync.losses.ppo</span> <span class="kn">import</span> <span class="n">PPOConfig</span>
<span class="kn">from</span> <span class="nn">projects.pointnav_baselines.models.point_nav_models</span> <span class="kn">import</span> <span class="p">(</span>
    <span class="n">ResnetTensorPointNavActorCritic</span><span class="p">,</span>
<span class="p">)</span>
<span class="kn">from</span> <span class="nn">plugins.ithor_plugin.ithor_sensors</span> <span class="kn">import</span> <span class="n">RGBSensorThor</span>
<span class="kn">from</span> <span class="nn">core.base_abstractions.experiment_config</span> <span class="kn">import</span> <span class="n">ExperimentConfig</span>
<span class="kn">from</span> <span class="nn">core.base_abstractions.preprocessor</span> <span class="kn">import</span> <span class="n">ObservationSet</span>
<span class="kn">from</span> <span class="nn">core.base_abstractions.task</span> <span class="kn">import</span> <span class="n">TaskSampler</span>
<span class="kn">from</span> <span class="nn">plugins.habitat_plugin.habitat_preprocessors</span> <span class="kn">import</span> <span class="n">ResnetPreProcessorHabitat</span>
<span class="kn">from</span> <span class="nn">plugins.robothor_plugin.robothor_sensors</span> <span class="kn">import</span> <span class="n">GPSCompassSensorRoboThor</span>
<span class="kn">from</span> <span class="nn">plugins.robothor_plugin.robothor_task_samplers</span> <span class="kn">import</span> <span class="n">PointNavDatasetTaskSampler</span>
<span class="kn">from</span> <span class="nn">plugins.robothor_plugin.robothor_tasks</span> <span class="kn">import</span> <span class="n">PointNavTask</span>
<span class="kn">from</span> <span class="nn">utils.experiment_utils</span> <span class="kn">import</span> <span class="n">Builder</span><span class="p">,</span> <span class="n">PipelineStage</span><span class="p">,</span> <span class="n">TrainingPipeline</span><span class="p">,</span> <span class="n">LinearDecay</span>
</pre></div>


<p>Next we define a new experiment config class:</p>
<div class="codehilite"><pre><span></span><span class="k">class</span> <span class="nc">ObjectNavRoboThorRGBPPOExperimentConfig</span><span class="p">(</span><span class="n">ExperimentConfig</span><span class="p">):</span>
</pre></div>


<p>We then define the task parameters. For PointNav, these include the maximum number of steps our agent
can take before being reset (this prevents the agent from wandering on forever), and a configuration
for the reward function that we will be using. </p>
<div class="codehilite"><pre><span></span>    <span class="c1"># Task Parameters</span>
    <span class="n">MAX_STEPS</span> <span class="o">=</span> <span class="mi">500</span>
    <span class="n">REWARD_CONFIG</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s2">&quot;step_penalty&quot;</span><span class="p">:</span> <span class="o">-</span><span class="mf">0.01</span><span class="p">,</span>
        <span class="s2">&quot;goal_success_reward&quot;</span><span class="p">:</span> <span class="mf">10.0</span><span class="p">,</span>
        <span class="s2">&quot;failed_stop_reward&quot;</span><span class="p">:</span> <span class="mf">0.0</span><span class="p">,</span>
        <span class="s2">&quot;shaping_weight&quot;</span><span class="p">:</span> <span class="mf">1.0</span><span class="p">,</span>
    <span class="p">}</span>
</pre></div>


<p>In this case, we set the maximum number of steps to 500.
We give the agent a reward of -0.01 for each action that it takes (this is to encourage it to reach the goal
in as few actions as possible), and a reward of 10.0 if the agent manages to successfully reach its destination.
If the agent selects the <code>stop</code> action without reaching the target we do not punish it (although this is
sometimes useful for preventing the agent from stopping prematurely). Finally, our agent gets rewarded if it moves
closer to the target and gets punished if it moves further away. <code>shaping_weight</code> controls how strong this signal should
be and is here set to 1.0. These parameters work well for training an agent on PointNav, but feel free to play around
with them.</p>
<p>Next, we set the parameters of the simulator itself. Here we select a resolution at which the engine will render
every frame (640 by 480) and a resolution at which the image will be fed into the neural network (here it is set
to a 224 by 224 box).</p>
<div class="codehilite"><pre><span></span>    <span class="c1"># Simulator Parameters</span>
    <span class="n">CAMERA_WIDTH</span> <span class="o">=</span> <span class="mi">640</span>
    <span class="n">CAMERA_HEIGHT</span> <span class="o">=</span> <span class="mi">480</span>
    <span class="n">SCREEN_SIZE</span> <span class="o">=</span> <span class="mi">224</span>
</pre></div>


<p>Next, we set the hardware parameters for the training engine. <code>NUM_PROCESSES</code> sets the total number of parallel processes that will be used to train the model. In general, more processes result in faster training, but since each process is a unique instance of the environment in which we are training they can take up a lot of memory. Depending on the size of the model, the environment, and the hardware we are using, we may need to adjust this number, but for a setup with 8 GTX Titans, 60 processes work fine. 60 also happens to be the number of training scenes in RoboTHOR, which allows each process to load only a single scene into memory, saving time and space.</p>
<p><code>TRAINING_GPUS</code> takes the ids of the GPUS on which
the model should be trained. Similarly <code>VALIDATION_GPUS</code> and <code>TESTING_GPUS</code> hold the ids of the GPUS on which the validation and testing will occur. During training, a validation process is constantly running and evaluating
the current model, to show the progress on the validation set, so reserving a GPU for validation can be a good idea.
If our hardware setup does not include a GPU, these fields can be set to empty lists, as the codebase will default
to running everything on the CPU with only 1 process.</p>
<div class="codehilite"><pre><span></span>    <span class="c1"># Training Engine Parameters</span>
    <span class="n">ADVANCE_SCENE_ROLLOUT_PERIOD</span> <span class="o">=</span> <span class="mi">10</span><span class="o">**</span><span class="mi">13</span>
    <span class="n">NUM_PROCESSES</span> <span class="o">=</span> <span class="mi">60</span>
    <span class="n">TRAINING_GPUS</span> <span class="o">=</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">6</span><span class="p">]</span>
    <span class="n">VALIDATION_GPUS</span> <span class="o">=</span> <span class="p">[</span><span class="mi">7</span><span class="p">]</span>
    <span class="n">TESTING_GPUS</span> <span class="o">=</span> <span class="p">[</span><span class="mi">7</span><span class="p">]</span>
</pre></div>


<p>Since we are using a dataset to train our model we need to define the path to where we have stored it. If we
download the dataset instructed above we can define the path as follows</p>
<div class="codehilite"><pre><span></span>    <span class="c1"># Dataset Parameters</span>
    <span class="n">TRAIN_DATASET_DIR</span> <span class="o">=</span> <span class="s2">&quot;projects/pointnav_baselines/dataset/robothor/train&quot;</span>
    <span class="n">VAL_DATASET_DIR</span> <span class="o">=</span> <span class="s2">&quot;projects/pointnav_baselines/dataset/robothor/val&quot;</span>
</pre></div>


<p>Next, we define the sensors. <code>RGBSensorThor</code> is the environment's implementation of an RGB sensor. It takes the
raw image outputted by the simulator and resizes it, to the input dimensions for our neural network that we
specified above. It also performs normalization if we want. <code>GPSCompassSensorRoboThor</code> is a sensor that tracks
the point our agent needs to move to. It tells us the direction and distance to our goal at every time step.</p>
<div class="codehilite"><pre><span></span>    <span class="n">SENSORS</span> <span class="o">=</span> <span class="p">[</span>
            <span class="n">RGBSensorThor</span><span class="p">(</span>
                <span class="n">height</span><span class="o">=</span><span class="n">SCREEN_SIZE</span><span class="p">,</span>
                <span class="n">width</span><span class="o">=</span><span class="n">SCREEN_SIZE</span><span class="p">,</span>
                <span class="n">use_resnet_normalization</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span>
                <span class="n">uuid</span><span class="o">=</span><span class="s2">&quot;rgb_lowres&quot;</span><span class="p">,</span>
            <span class="p">),</span>
            <span class="n">GPSCompassSensorRoboThor</span><span class="p">(),</span>
    <span class="p">]</span>
</pre></div>


<p>For the sake of this example, we are also going to be using a preprocessor with our model. In <em>allenact</em>
the preprocessor abstraction is designed with large models with frozen weights in mind. These models often
hail from the ResNet family and transform the raw pixels that our agent observes in the environment, into a
complex embedding, which then gets stored and used as input to our trainable model instead of the original image.
Most other preprocessing work is done in the sensor classes (as we just saw with the RGB
sensor scaling and normalizing our input), but for the sake of efficiency, all neural network preprocessing should
use this abstraction.</p>
<div class="codehilite"><pre><span></span>    <span class="n">PREPROCESSORS</span> <span class="o">=</span> <span class="p">[</span>
            <span class="n">Builder</span><span class="p">(</span><span class="n">ResnetPreProcessorHabitat</span><span class="p">,</span>
                <span class="p">{</span>
                    <span class="s2">&quot;input_height&quot;</span><span class="p">:</span> <span class="n">SCREEN_SIZE</span><span class="p">,</span>
                    <span class="s2">&quot;input_width&quot;</span><span class="p">:</span> <span class="n">SCREEN_SIZE</span><span class="p">,</span>
                    <span class="s2">&quot;output_width&quot;</span><span class="p">:</span> <span class="mi">7</span><span class="p">,</span>
                    <span class="s2">&quot;output_height&quot;</span><span class="p">:</span> <span class="mi">7</span><span class="p">,</span>
                    <span class="s2">&quot;output_dims&quot;</span><span class="p">:</span> <span class="mi">512</span><span class="p">,</span>
                    <span class="s2">&quot;pool&quot;</span><span class="p">:</span> <span class="bp">False</span><span class="p">,</span>
                    <span class="s2">&quot;torchvision_resnet_model&quot;</span><span class="p">:</span> <span class="n">models</span><span class="o">.</span><span class="n">resnet18</span><span class="p">,</span>
                    <span class="s2">&quot;input_uuids&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;rgb_lowres&quot;</span><span class="p">],</span>
                    <span class="s2">&quot;output_uuid&quot;</span><span class="p">:</span> <span class="s2">&quot;rgb_resnet&quot;</span><span class="p">,</span>
                    <span class="s2">&quot;parallel&quot;</span><span class="p">:</span> <span class="bp">False</span><span class="p">,</span>  <span class="c1"># TODO False for debugging</span>
                <span class="p">}</span>
            <span class="p">),</span>
    <span class="p">]</span>
</pre></div>


<p>Next, we must define all of the observation inputs that our model will use. These are just
the hardcoded ids of the sensors we are using in the experiment.</p>
<div class="codehilite"><pre><span></span>    <span class="n">OBSERVATIONS</span> <span class="o">=</span> <span class="p">[</span>
        <span class="s2">&quot;rgb_resnet&quot;</span><span class="p">,</span>
        <span class="s2">&quot;target_coordinates_ind&quot;</span><span class="p">,</span>
    <span class="p">]</span>
</pre></div>


<p>Finally, we must define the settings of our simulator. We set the camera dimensions to the values
we defined earlier. We set rotateStepDegrees to 30 degrees, which means that every time the agent takes a
turn action, they will rotate by 30 degrees. We set grid size to 0.25 which means that every time the
agent moves forward, it will do so by 0.25 meters. </p>
<div class="codehilite"><pre><span></span>    <span class="n">ENV_ARGS</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span>
            <span class="n">width</span><span class="o">=</span><span class="n">CAMERA_WIDTH</span><span class="p">,</span>
            <span class="n">height</span><span class="o">=</span><span class="n">CAMERA_HEIGHT</span><span class="p">,</span>
            <span class="n">rotateStepDegrees</span><span class="o">=</span><span class="mf">30.0</span><span class="p">,</span>
            <span class="n">gridSize</span><span class="o">=</span><span class="mf">0.25</span><span class="p">,</span>
    <span class="p">)</span>
</pre></div>


<p>Now we move on to the methods that we must define to finish implementing an experiment config. Firstly we
have a simple method that just returns the name of the experiment.</p>
<div class="codehilite"><pre><span></span>   <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">tag</span><span class="p">(</span><span class="bp">cls</span><span class="p">):</span>
        <span class="k">return</span> <span class="s2">&quot;PointNavRobothorRGBPPO&quot;</span>
</pre></div>


<p>Next, we define the training pipeline. In this function, we specify exactly which algorithm or algorithms
we will use to train our model. In this simple example, we are using the PPO loss with a learning rate of 3e-4.
We specify 250 million steps of training and a rollout length of 30 with the <code>ppo_steps</code> and <code>num_steps</code> parameters
respectively. All the other standard PPO parameters are also present in this function. <code>metric_accumulate_interval</code>
sets the frequency at which data is accumulated from all the processes and logged while <code>save_interval</code> sets how
often we save the model weights and run validation on them.</p>
<div class="codehilite"><pre><span></span>    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">training_pipeline</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="n">ppo_steps</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="mi">250000000</span><span class="p">)</span>
        <span class="n">lr</span> <span class="o">=</span> <span class="mf">3e-4</span>
        <span class="n">num_mini_batch</span> <span class="o">=</span> <span class="mi">1</span>
        <span class="n">update_repeats</span> <span class="o">=</span> <span class="mi">3</span>
        <span class="n">num_steps</span> <span class="o">=</span> <span class="mi">30</span>
        <span class="n">save_interval</span> <span class="o">=</span> <span class="mi">5000000</span>
        <span class="n">metric_accumulate_interval</span> <span class="o">=</span> <span class="mi">10000</span>
        <span class="n">gamma</span> <span class="o">=</span> <span class="mf">0.99</span>
        <span class="n">use_gae</span> <span class="o">=</span> <span class="bp">True</span>
        <span class="n">gae_lambda</span> <span class="o">=</span> <span class="mf">0.95</span>
        <span class="n">max_grad_norm</span> <span class="o">=</span> <span class="mf">0.5</span>
        <span class="k">return</span> <span class="n">TrainingPipeline</span><span class="p">(</span>
            <span class="n">save_interval</span><span class="o">=</span><span class="n">save_interval</span><span class="p">,</span>
            <span class="n">metric_accumulate_interval</span><span class="o">=</span><span class="n">metric_accumulate_interval</span><span class="p">,</span>
            <span class="n">optimizer_builder</span><span class="o">=</span><span class="n">Builder</span><span class="p">(</span><span class="n">optim</span><span class="o">.</span><span class="n">Adam</span><span class="p">,</span> <span class="nb">dict</span><span class="p">(</span><span class="n">lr</span><span class="o">=</span><span class="n">lr</span><span class="p">)),</span>
            <span class="n">num_mini_batch</span><span class="o">=</span><span class="n">num_mini_batch</span><span class="p">,</span>
            <span class="n">update_repeats</span><span class="o">=</span><span class="n">update_repeats</span><span class="p">,</span>
            <span class="n">max_grad_norm</span><span class="o">=</span><span class="n">max_grad_norm</span><span class="p">,</span>
            <span class="n">num_steps</span><span class="o">=</span><span class="n">num_steps</span><span class="p">,</span>
            <span class="n">named_losses</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;ppo_loss&quot;</span><span class="p">:</span> <span class="n">Builder</span><span class="p">(</span><span class="n">PPO</span><span class="p">,</span> <span class="n">kwargs</span><span class="o">=</span><span class="p">{},</span> <span class="n">default</span><span class="o">=</span><span class="n">PPOConfig</span><span class="p">,</span> <span class="p">)},</span>
            <span class="n">gamma</span><span class="o">=</span><span class="n">gamma</span><span class="p">,</span>
            <span class="n">use_gae</span><span class="o">=</span><span class="n">use_gae</span><span class="p">,</span>
            <span class="n">gae_lambda</span><span class="o">=</span><span class="n">gae_lambda</span><span class="p">,</span>
            <span class="n">advance_scene_rollout_period</span><span class="o">=</span><span class="bp">cls</span><span class="o">.</span><span class="n">ADVANCE_SCENE_ROLLOUT_PERIOD</span><span class="p">,</span>
            <span class="n">pipeline_stages</span><span class="o">=</span><span class="p">[</span>
                <span class="n">PipelineStage</span><span class="p">(</span><span class="n">loss_names</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;ppo_loss&quot;</span><span class="p">],</span> <span class="n">max_stage_steps</span><span class="o">=</span><span class="n">ppo_steps</span><span class="p">)</span>
            <span class="p">],</span>
            <span class="n">lr_scheduler_builder</span><span class="o">=</span><span class="n">Builder</span><span class="p">(</span>
                <span class="n">LambdaLR</span><span class="p">,</span> <span class="p">{</span><span class="s2">&quot;lr_lambda&quot;</span><span class="p">:</span> <span class="n">LinearDecay</span><span class="p">(</span><span class="n">steps</span><span class="o">=</span><span class="n">ppo_steps</span><span class="p">)}</span>
            <span class="p">),</span>
        <span class="p">)</span>
</pre></div>


<p>We define the helper method <code>split_num_processes</code> to split the different scenes that we want to train with
amongst the different available devices. "machine_params" returns the hardware parameters of each
process, based on the list of devices we defined above.</p>
<div class="codehilite"><pre><span></span>    <span class="k">def</span> <span class="nf">split_num_processes</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ndevices</span><span class="p">):</span>
        <span class="k">assert</span> <span class="bp">self</span><span class="o">.</span><span class="n">NUM_PROCESSES</span> <span class="o">&gt;=</span> <span class="n">ndevices</span><span class="p">,</span> <span class="s2">&quot;NUM_PROCESSES {} &lt; ndevices&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">NUM_PROCESSES</span><span class="p">,</span> <span class="n">ndevices</span><span class="p">)</span>
        <span class="n">res</span> <span class="o">=</span> <span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">*</span> <span class="n">ndevices</span>
        <span class="k">for</span> <span class="n">it</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">NUM_PROCESSES</span><span class="p">):</span>
            <span class="n">res</span><span class="p">[</span><span class="n">it</span> <span class="o">%</span> <span class="n">ndevices</span><span class="p">]</span> <span class="o">+=</span> <span class="mi">1</span>
        <span class="k">return</span> <span class="n">res</span>

    <span class="k">def</span> <span class="nf">machine_params</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">mode</span><span class="o">=</span><span class="s2">&quot;train&quot;</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">mode</span> <span class="o">==</span> <span class="s2">&quot;train&quot;</span><span class="p">:</span>
            <span class="n">workers_per_device</span> <span class="o">=</span> <span class="mi">1</span>
            <span class="n">gpu_ids</span> <span class="o">=</span> <span class="p">[]</span> <span class="k">if</span> <span class="ow">not</span> <span class="n">torch</span><span class="o">.</span><span class="n">cuda</span><span class="o">.</span><span class="n">is_available</span><span class="p">()</span> <span class="k">else</span> <span class="bp">self</span><span class="o">.</span><span class="n">TRAINING_GPUS</span> <span class="o">*</span> <span class="n">workers_per_device</span>
            <span class="n">nprocesses</span> <span class="o">=</span> <span class="mi">1</span> <span class="k">if</span> <span class="ow">not</span> <span class="n">torch</span><span class="o">.</span><span class="n">cuda</span><span class="o">.</span><span class="n">is_available</span><span class="p">()</span> <span class="k">else</span> <span class="bp">self</span><span class="o">.</span><span class="n">split_num_processes</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">gpu_ids</span><span class="p">))</span>
            <span class="n">sampler_devices</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">TRAINING_GPUS</span>
            <span class="n">render_video</span> <span class="o">=</span> <span class="bp">False</span>
        <span class="k">elif</span> <span class="n">mode</span> <span class="o">==</span> <span class="s2">&quot;valid&quot;</span><span class="p">:</span>
            <span class="n">nprocesses</span> <span class="o">=</span> <span class="mi">1</span>
            <span class="n">gpu_ids</span> <span class="o">=</span> <span class="p">[]</span> <span class="k">if</span> <span class="ow">not</span> <span class="n">torch</span><span class="o">.</span><span class="n">cuda</span><span class="o">.</span><span class="n">is_available</span><span class="p">()</span> <span class="k">else</span> <span class="bp">self</span><span class="o">.</span><span class="n">VALIDATION_GPUS</span>
            <span class="n">render_video</span> <span class="o">=</span> <span class="bp">False</span>
        <span class="k">elif</span> <span class="n">mode</span> <span class="o">==</span> <span class="s2">&quot;test&quot;</span><span class="p">:</span>
            <span class="n">nprocesses</span> <span class="o">=</span> <span class="mi">1</span>
            <span class="n">gpu_ids</span> <span class="o">=</span> <span class="p">[]</span> <span class="k">if</span> <span class="ow">not</span> <span class="n">torch</span><span class="o">.</span><span class="n">cuda</span><span class="o">.</span><span class="n">is_available</span><span class="p">()</span> <span class="k">else</span> <span class="bp">self</span><span class="o">.</span><span class="n">TESTING_GPUS</span>
            <span class="n">render_video</span> <span class="o">=</span> <span class="bp">False</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span><span class="s2">&quot;mode must be &#39;train&#39;, &#39;valid&#39;, or &#39;test&#39;.&quot;</span><span class="p">)</span>

        <span class="c1"># Disable parallelization for validation process</span>
        <span class="k">if</span> <span class="n">mode</span> <span class="o">==</span> <span class="s2">&quot;valid&quot;</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">prep</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">PREPROCESSORS</span><span class="p">:</span>
                <span class="n">prep</span><span class="o">.</span><span class="n">kwargs</span><span class="p">[</span><span class="s2">&quot;parallel&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">False</span>

        <span class="n">observation_set</span> <span class="o">=</span> <span class="n">Builder</span><span class="p">(</span><span class="n">ObservationSet</span><span class="p">,</span> <span class="n">kwargs</span><span class="o">=</span><span class="nb">dict</span><span class="p">(</span>
            <span class="n">source_ids</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">OBSERVATIONS</span><span class="p">,</span> <span class="n">all_preprocessors</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">PREPROCESSORS</span><span class="p">,</span> <span class="n">all_sensors</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">SENSORS</span>
        <span class="p">))</span> <span class="k">if</span> <span class="n">mode</span> <span class="o">==</span> <span class="s1">&#39;train&#39;</span> <span class="ow">or</span> <span class="n">nprocesses</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="k">else</span> <span class="bp">None</span>

        <span class="k">return</span> <span class="p">{</span>
            <span class="s2">&quot;nprocesses&quot;</span><span class="p">:</span> <span class="n">nprocesses</span><span class="p">,</span>
            <span class="s2">&quot;gpu_ids&quot;</span><span class="p">:</span> <span class="n">gpu_ids</span><span class="p">,</span>
            <span class="s2">&quot;sampler_devices&quot;</span><span class="p">:</span> <span class="n">sampler_devices</span> <span class="k">if</span> <span class="n">mode</span> <span class="o">==</span> <span class="s2">&quot;train&quot;</span> <span class="k">else</span> <span class="n">gpu_ids</span><span class="p">,</span>
            <span class="s2">&quot;observation_set&quot;</span><span class="p">:</span> <span class="n">observation_set</span><span class="p">,</span>
            <span class="s2">&quot;render_video&quot;</span><span class="p">:</span> <span class="n">render_video</span><span class="p">,</span>
        <span class="p">}</span>
</pre></div>


<p>Now we define the actual model that we will be using. <strong>AllenAct</strong> offers first-class support for PyTorch,
so any PyTorch model that implements the provided <code>ActorCriticModel</code> class will work here. Here we borrow a model from the <code>pointnav_baselines</code> project (which
unsurprisingly contains several PointNav baselines). It is a small convolutional network that expects the output of a ResNet as its rgb input followed by a single-layered GRU. The model accepts as input the number of different
actions our agent can perform in the environment through the <code>action_space</code> parameter, which we get from the task definition. We also define the shape of the inputs we are going to be passing to the model with <code>observation_space</code>
We specify the names of our sensors with <code>goal_sensor_uuid</code> and <code>rgb_resnet_preprocessor_uuid</code>. Finally, we define
the size of our RNN with <code>hidden_layer</code> and the size of the embedding of our goal sensor data (the direction and
distance to the target) with <code>goal_dims</code>.</p>
<div class="codehilite"><pre><span></span>    <span class="c1"># Define Model</span>
    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">create_model</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">nn</span><span class="o">.</span><span class="n">Module</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">ResnetTensorPointNavActorCritic</span><span class="p">(</span>
            <span class="n">action_space</span><span class="o">=</span><span class="n">gym</span><span class="o">.</span><span class="n">spaces</span><span class="o">.</span><span class="n">Discrete</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">PointNavTask</span><span class="o">.</span><span class="n">class_action_names</span><span class="p">())),</span>
            <span class="n">observation_space</span><span class="o">=</span><span class="n">kwargs</span><span class="p">[</span><span class="s2">&quot;observation_set&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">observation_spaces</span><span class="p">,</span>
            <span class="n">goal_sensor_uuid</span><span class="o">=</span><span class="s2">&quot;target_coordinates_ind&quot;</span><span class="p">,</span>
            <span class="n">rgb_resnet_preprocessor_uuid</span><span class="o">=</span><span class="s2">&quot;rgb_resnet&quot;</span><span class="p">,</span>
            <span class="n">hidden_size</span><span class="o">=</span><span class="mi">512</span><span class="p">,</span>
            <span class="n">goal_dims</span><span class="o">=</span><span class="mi">32</span><span class="p">,</span>
        <span class="p">)</span>
</pre></div>


<p>We also need to define the task sampler that we will be using. This is a piece of code that generates instances
of tasks for our agent to perform (essentially starting locations and targets for PointNav). Since we are getting
our tasks from a dataset, the task sampler is a very simple code that just reads the specified file and sets
the agent to the next starting locations whenever the agent exceeds the maximum number of steps or selects the
<code>stop</code> action.</p>
<div class="codehilite"><pre><span></span>    <span class="c1"># Define Task Sampler</span>
    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">make_sampler_fn</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">TaskSampler</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">PointNavDatasetTaskSampler</span><span class="p">(</span><span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
</pre></div>


<p>You might notice that we did not specify the task sampler's arguments, but are rather passing them in. The
reason for this is that each process will have its own task sampler, and we need to specify exactly which scenes
each process should work with. If we have several GPUS and many scenes this process of distributing the work can be rather complicated so we define a few helper functions to do just this.</p>
<div class="codehilite"><pre><span></span>    <span class="c1"># Utility Functions for distributing scenes between GPUs</span>
    <span class="nd">@staticmethod</span>
    <span class="k">def</span> <span class="nf">_partition_inds</span><span class="p">(</span><span class="n">n</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span> <span class="n">num_parts</span><span class="p">:</span> <span class="nb">int</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">np</span><span class="o">.</span><span class="n">round</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">linspace</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">n</span><span class="p">,</span> <span class="n">num_parts</span> <span class="o">+</span> <span class="mi">1</span><span class="p">,</span> <span class="n">endpoint</span><span class="o">=</span><span class="bp">True</span><span class="p">))</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span>
            <span class="n">np</span><span class="o">.</span><span class="n">int32</span>
        <span class="p">)</span>

    <span class="k">def</span> <span class="nf">_get_sampler_args_for_scene_split</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">scenes_dir</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="n">process_ind</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span>
        <span class="n">total_processes</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span>
        <span class="n">seeds</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">List</span><span class="p">[</span><span class="nb">int</span><span class="p">]]</span> <span class="o">=</span> <span class="bp">None</span><span class="p">,</span>
        <span class="n">deterministic_cudnn</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="bp">False</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]:</span>
        <span class="n">path</span> <span class="o">=</span> <span class="n">scenes_dir</span> <span class="o">+</span> <span class="s2">&quot;*.json.gz&quot;</span> <span class="k">if</span> <span class="n">scenes_dir</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;/&quot;</span> <span class="k">else</span> <span class="n">scenes_dir</span> <span class="o">+</span> <span class="s2">&quot;/*.json.gz&quot;</span>
        <span class="n">scenes</span> <span class="o">=</span> <span class="p">[</span><span class="n">scene</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;/&quot;</span><span class="p">)[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;.&quot;</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span> <span class="k">for</span> <span class="n">scene</span> <span class="ow">in</span> <span class="n">glob</span><span class="o">.</span><span class="n">glob</span><span class="p">(</span><span class="n">path</span><span class="p">)]</span>
        <span class="k">if</span> <span class="n">total_processes</span> <span class="o">&gt;</span> <span class="nb">len</span><span class="p">(</span><span class="n">scenes</span><span class="p">):</span>  <span class="c1"># oversample some scenes -&gt; bias</span>
            <span class="k">if</span> <span class="n">total_processes</span> <span class="o">%</span> <span class="nb">len</span><span class="p">(</span><span class="n">scenes</span><span class="p">)</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">:</span>
                <span class="k">print</span><span class="p">(</span>
                    <span class="s2">&quot;Warning: oversampling some of the scenes to feed all processes.&quot;</span>
                    <span class="s2">&quot; You can avoid this by setting a number of workers divisible by the number of scenes&quot;</span>
                <span class="p">)</span>
            <span class="n">scenes</span> <span class="o">=</span> <span class="n">scenes</span> <span class="o">*</span> <span class="nb">int</span><span class="p">(</span><span class="n">ceil</span><span class="p">(</span><span class="n">total_processes</span> <span class="o">/</span> <span class="nb">len</span><span class="p">(</span><span class="n">scenes</span><span class="p">)))</span>
            <span class="n">scenes</span> <span class="o">=</span> <span class="n">scenes</span><span class="p">[:</span> <span class="n">total_processes</span> <span class="o">*</span> <span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">scenes</span><span class="p">)</span> <span class="o">//</span> <span class="n">total_processes</span><span class="p">)]</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">scenes</span><span class="p">)</span> <span class="o">%</span> <span class="n">total_processes</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">:</span>
                <span class="k">print</span><span class="p">(</span>
                    <span class="s2">&quot;Warning: oversampling some of the scenes to feed all processes.&quot;</span>
                    <span class="s2">&quot; You can avoid this by setting a number of workers divisor of the number of scenes&quot;</span>
                <span class="p">)</span>
        <span class="n">inds</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_partition_inds</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">scenes</span><span class="p">),</span> <span class="n">total_processes</span><span class="p">)</span>

        <span class="k">return</span> <span class="p">{</span>
            <span class="s2">&quot;scenes&quot;</span><span class="p">:</span> <span class="n">scenes</span><span class="p">[</span><span class="n">inds</span><span class="p">[</span><span class="n">process_ind</span><span class="p">]:</span><span class="n">inds</span><span class="p">[</span><span class="n">process_ind</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]],</span>
            <span class="s2">&quot;max_steps&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">MAX_STEPS</span><span class="p">,</span>
            <span class="s2">&quot;sensors&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">SENSORS</span><span class="p">,</span>
            <span class="s2">&quot;action_space&quot;</span><span class="p">:</span> <span class="n">gym</span><span class="o">.</span><span class="n">spaces</span><span class="o">.</span><span class="n">Discrete</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">PointNavTask</span><span class="o">.</span><span class="n">class_action_names</span><span class="p">())),</span>
            <span class="s2">&quot;seed&quot;</span><span class="p">:</span> <span class="n">seeds</span><span class="p">[</span><span class="n">process_ind</span><span class="p">]</span> <span class="k">if</span> <span class="n">seeds</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span> <span class="k">else</span> <span class="bp">None</span><span class="p">,</span>
            <span class="s2">&quot;deterministic_cudnn&quot;</span><span class="p">:</span> <span class="n">deterministic_cudnn</span><span class="p">,</span>
            <span class="s2">&quot;rewards_config&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">REWARD_CONFIG</span>
        <span class="p">}</span>
</pre></div>


<p>The very last things we need to define are the sampler arguments themselves. We define them separately for a train,
validation, and test sampler, but in this case, they are almost the same. The arguments need to include the location
of the dataset and distance cache as well as the environment arguments for our simulator, both of which we defined above
and are just referencing here. The only consequential differences between these task samplers are the path to the dataset we are using (train or validation) and whether we want to loop over the dataset or not (we want this for training since we want to train for several epochs, but we do not need this for validation and testing). Since the test scenes of RoboTHOR are private we are also testing on our validation
set.</p>
<div class="codehilite"><pre><span></span>    <span class="k">def</span> <span class="nf">train_task_sampler_args</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">process_ind</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span>
        <span class="n">total_processes</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span>
        <span class="n">devices</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">List</span><span class="p">[</span><span class="nb">int</span><span class="p">]]</span> <span class="o">=</span> <span class="bp">None</span><span class="p">,</span>
        <span class="n">seeds</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">List</span><span class="p">[</span><span class="nb">int</span><span class="p">]]</span> <span class="o">=</span> <span class="bp">None</span><span class="p">,</span>
        <span class="n">deterministic_cudnn</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="bp">False</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]:</span>
        <span class="n">res</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_sampler_args_for_scene_split</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">TRAIN_DATASET_DIR</span> <span class="o">+</span> <span class="s1">&#39;/episodes/&#39;</span><span class="p">,</span>
            <span class="n">process_ind</span><span class="p">,</span>
            <span class="n">total_processes</span><span class="p">,</span>
            <span class="n">seeds</span><span class="o">=</span><span class="n">seeds</span><span class="p">,</span>
            <span class="n">deterministic_cudnn</span><span class="o">=</span><span class="n">deterministic_cudnn</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="n">res</span><span class="p">[</span><span class="s2">&quot;scene_directory&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">TRAIN_DATASET_DIR</span>
        <span class="n">res</span><span class="p">[</span><span class="s2">&quot;loop_dataset&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">True</span>
        <span class="n">res</span><span class="p">[</span><span class="s2">&quot;env_args&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="n">res</span><span class="p">[</span><span class="s2">&quot;env_args&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">ENV_ARGS</span><span class="p">)</span>
        <span class="n">res</span><span class="p">[</span><span class="s2">&quot;env_args&quot;</span><span class="p">][</span><span class="s2">&quot;x_display&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span>
            <span class="p">(</span><span class="s2">&quot;0.</span><span class="si">%d</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="n">devices</span><span class="p">[</span><span class="n">process_ind</span> <span class="o">%</span> <span class="nb">len</span><span class="p">(</span><span class="n">devices</span><span class="p">)])</span> <span class="k">if</span> <span class="n">devices</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span> <span class="ow">and</span> <span class="nb">len</span><span class="p">(</span><span class="n">devices</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="k">else</span> <span class="bp">None</span>
        <span class="p">)</span>
        <span class="n">res</span><span class="p">[</span><span class="s2">&quot;allow_flipping&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">True</span>
        <span class="k">return</span> <span class="n">res</span>

    <span class="k">def</span> <span class="nf">valid_task_sampler_args</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">process_ind</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span>
        <span class="n">total_processes</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span>
        <span class="n">devices</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">List</span><span class="p">[</span><span class="nb">int</span><span class="p">]]</span> <span class="o">=</span> <span class="bp">None</span><span class="p">,</span>
        <span class="n">seeds</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">List</span><span class="p">[</span><span class="nb">int</span><span class="p">]]</span> <span class="o">=</span> <span class="bp">None</span><span class="p">,</span>
        <span class="n">deterministic_cudnn</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="bp">False</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]:</span>
        <span class="n">res</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_sampler_args_for_scene_split</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">VAL_DATASET_DIR</span> <span class="o">+</span> <span class="s1">&#39;/episodes/&#39;</span><span class="p">,</span>
            <span class="n">process_ind</span><span class="p">,</span>
            <span class="n">total_processes</span><span class="p">,</span>
            <span class="n">seeds</span><span class="o">=</span><span class="n">seeds</span><span class="p">,</span>
            <span class="n">deterministic_cudnn</span><span class="o">=</span><span class="n">deterministic_cudnn</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="n">res</span><span class="p">[</span><span class="s2">&quot;scene_directory&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">VAL_DATASET_DIR</span>
        <span class="n">res</span><span class="p">[</span><span class="s2">&quot;loop_dataset&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">False</span>
        <span class="n">res</span><span class="p">[</span><span class="s2">&quot;env_args&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="n">res</span><span class="p">[</span><span class="s2">&quot;env_args&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">ENV_ARGS</span><span class="p">)</span>
        <span class="n">res</span><span class="p">[</span><span class="s2">&quot;env_args&quot;</span><span class="p">][</span><span class="s2">&quot;x_display&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span>
            <span class="p">(</span><span class="s2">&quot;0.</span><span class="si">%d</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="n">devices</span><span class="p">[</span><span class="n">process_ind</span> <span class="o">%</span> <span class="nb">len</span><span class="p">(</span><span class="n">devices</span><span class="p">)])</span> <span class="k">if</span> <span class="n">devices</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span> <span class="ow">and</span> <span class="nb">len</span><span class="p">(</span><span class="n">devices</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="k">else</span> <span class="bp">None</span>
        <span class="p">)</span>
        <span class="k">return</span> <span class="n">res</span>

    <span class="k">def</span> <span class="nf">test_task_sampler_args</span><span class="p">(</span>
            <span class="bp">self</span><span class="p">,</span>
            <span class="n">process_ind</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span>
            <span class="n">total_processes</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span>
            <span class="n">devices</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">List</span><span class="p">[</span><span class="nb">int</span><span class="p">]]</span> <span class="o">=</span> <span class="bp">None</span><span class="p">,</span>
            <span class="n">seeds</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">List</span><span class="p">[</span><span class="nb">int</span><span class="p">]]</span> <span class="o">=</span> <span class="bp">None</span><span class="p">,</span>
            <span class="n">deterministic_cudnn</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="bp">False</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]:</span>
        <span class="n">res</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_sampler_args_for_scene_split</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">VAL_DATASET_DIR</span> <span class="o">+</span> <span class="s1">&#39;/episodes/&#39;</span><span class="p">,</span>
            <span class="n">process_ind</span><span class="p">,</span>
            <span class="n">total_processes</span><span class="p">,</span>
            <span class="n">seeds</span><span class="o">=</span><span class="n">seeds</span><span class="p">,</span>
            <span class="n">deterministic_cudnn</span><span class="o">=</span><span class="n">deterministic_cudnn</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="n">res</span><span class="p">[</span><span class="s2">&quot;scene_directory&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">VAL_DATASET_DIR</span>
        <span class="n">res</span><span class="p">[</span><span class="s2">&quot;loop_dataset&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">False</span>
        <span class="n">res</span><span class="p">[</span><span class="s2">&quot;env_args&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="n">res</span><span class="p">[</span><span class="s2">&quot;env_args&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">ENV_ARGS</span><span class="p">)</span>
        <span class="n">res</span><span class="p">[</span><span class="s2">&quot;env_args&quot;</span><span class="p">][</span><span class="s2">&quot;x_display&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;10.0&quot;</span>
        <span class="k">return</span> <span class="n">res</span>
</pre></div>


<p>This is it! If we copy all of the code into a file we should be able to run our experiment!</p>
<h2 id="training-model-on-debug-dataset">Training Model On Debug Dataset<a class="headerlink" href="#training-model-on-debug-dataset" title="Permanent link">#</a></h2>
<p>We can test if our installation worked properly by training our model on a small dataset of 4 episodes. This
should take about 20 minutes on a computer with a NVIDIA GPU.</p>
<p>First we need to change the dataset path to point to our small debug dataset. Modify these lines in your file</p>
<div class="codehilite"><pre><span></span>    <span class="c1"># Dataset Parameters</span>
    <span class="n">TRAIN_DATASET_DIR</span> <span class="o">=</span> <span class="s2">&quot;projects/pointnav_baselines/dataset/robothor/debug&quot;</span>
    <span class="n">VAL_DATASET_DIR</span> <span class="o">=</span> <span class="s2">&quot;projects/pointnav_baselines/dataset/robothor/debug&quot;</span>
</pre></div>


<p>Note that we changed both the train and test dataset to debug, so the model will train and validate on the same
4 episodes.</p>
<p>We can not train a model by running:</p>
<div class="codehilite"><pre><span></span>python main.py -o &lt;PATH_TO_OUTPUT&gt; -c -b &lt;BASE_DIRECTORY_OF_YOUR_EXPERIMENT&gt; &lt;EXPERIMENT_NAME&gt;
</pre></div>


<p>If using the same configuration as we have set up, the following command should work:</p>
<div class="codehilite"><pre><span></span>python main.py -o projects/tutorials/pointnav_robothor_rgb/storage/ -b projects/tutorials/pointnav_robothor_rgb/experiments pointnav_robothor_rgb_ddppo
</pre></div>


<p>If we start up a tensorboard server during training and specify that <code>output_dir=storage</code> the output should look
something like this:
<img alt="tensorboard output" src="../../img/tb.png" /></p>
<h2 id="training-model-on-full-dataset">Training Model On Full Dataset<a class="headerlink" href="#training-model-on-full-dataset" title="Permanent link">#</a></h2>
<p>We can also train the model on the full dataset by changing back our dataset path and running:</p>
<div class="codehilite"><pre><span></span>python main.py -o &lt;PATH_TO_OUTPUT&gt; -c -b &lt;BASE_DIRECTORY_OF_YOUR_EXPERIMENT&gt; &lt;EXPERIMENT_NAME&gt;
</pre></div>


<p>But be aware, training this takes nearly 2 days on a machine with 8 GPU. For our current setup the following command would work:</p>
<div class="codehilite"><pre><span></span>python main.py -o projects/tutorials/pointnav_robothor_rgb/storage/ -b projects/tutorials/pointnav_robothor_rgb/experiments pointnav_robothor_rgb_ddppo
</pre></div>


<p>If we start up a tensorboard server during training and specify that <code>output_dir=storage</code> the output should look
something like this:
<img alt="tensorboard output" src="../../img/tb.png" /></p>
<h2 id="conclusion">Conclusion<a class="headerlink" href="#conclusion" title="Permanent link">#</a></h2>
<p>In this tutorial, we learned how to create a new PointNav experiment using <strong>AllenAct</strong>. There are many simple
and obvious ways to modify the experiment from here - changing the model, the learning algorithm and the environment
each requires very few lines of code changed in the above file, allowing us to explore our embodied ai research ideas
across different frameworks with ease.</p>
                
                  
                
              
              
                


              
            </article>
          </div>
        </div>
      </main>
      
        
<footer class="md-footer">
  
    <div class="md-footer-nav">
      <nav class="md-footer-nav__inner md-grid">
        
          <a href="../minigrid-tutorial/" title="Navigation in Minigrid" class="md-flex md-footer-nav__link md-footer-nav__link--prev" rel="prev">
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-back md-footer-nav__button"></i>
            </div>
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Previous
                </span>
                Navigation in Minigrid
              </span>
            </div>
          </a>
        
        
          <a href="../transfering-to-a-different-environment-framework/" title="Swapping environments" class="md-flex md-footer-nav__link md-footer-nav__link--next" rel="next">
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Next
                </span>
                Swapping environments
              </span>
            </div>
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-forward md-footer-nav__button"></i>
            </div>
          </a>
        
      </nav>
    </div>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
        powered by
        <a href="https://www.mkdocs.org">MkDocs</a>
        and
        <a href="https://squidfunk.github.io/mkdocs-material/">
          Material for MkDocs</a>
      </div>
      
    </div>
  </div>
</footer>
      
    </div>
    
      <script src="../../assets/javascripts/application.2ba8dec4.js"></script>
      
      <script>app.initialize({version:"1.0.4",url:{base:"../.."}})</script>
      
    
  </body>
</html>